<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venba Analyzer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #output {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Venba Analyzer</h1>
    <p>Enter a Venba in Tamil:</p>
    <input type="text" id="venbaInput" placeholder="Enter Venba here">
    <button onclick="analyzeVenba()">Analyze Venba</button>

    <div id="output"></div>


    <script>
       const readline = require('readline');

// Initialize Tamil letters and mathirai values
const tamilLetters = [
    "ஃ", "அ", "ஆ", "இ", "ஈ", "உ", "ஊ", "எ", "ஏ", "ஒ", "ஓ",
    "க", "கா", "கி", "கீ", "கு", "கூ", "கெ", "கே", "கொ", "கோ",
    "ங", "ஙா", "ஙி", "ஙீ", "ஙு", "ஙூ", "ஙெ", "ஙே", "ஙொ", "ஙோ",
    "ச", "சா", "சி", "சீ", "சு", "சூ", "செ", "சே", "சொ", "சோ",
    "ஞ", "ஞா", "ஞி", "ஞீ", "ஞு", "ஞூ", "ஞெ", "ஞே", "ஞொ", "ஞோ",
    "ட", "டா", "டி", "டீ", "டு", "டூ", "டெ", "டே", "டொ", "டோ",
    "ண", "ணா", "ணி", "ணீ", "ணு", "ணூ", "ணெ", "ணே", "ணொ", "ணோ",
    "த", "தா", "தி", "தீ", "து", "தூ", "தெ", "தே", "தொ", "தோ",
    "ந", "நா", "நி", "நீ", "நு", "நூ", "நெ", "நே", "நொ", "நோ",
    "ப", "பா", "பி", "பீ", "பு", "பூ", "பெ", "பே", "பொ", "போ",
    "ம", "மா", "மி", "மீ", "மு", "மூ", "மெ", "மே", "மொ", "மோ",
    "ய", "யா", "யி", "யீ", "யு", "யூ", "யெ", "யே", "யொ", "யோ",
    "ர", "ரா", "ரி", "ரீ", "ரு", "ரூ", "ரெ", "ரே", "ரொ", "ரோ",
    "ல", "லா", "லி", "லீ", "லு", "லூ", "லெ", "லே", "லொ", "லோ",
    "வ", "வா", "வி", "வீ", "வு", "வூ", "வெ", "வே", "வொ", "வோ",
    "ழ", "ழா", "ழி", "ழீ", "ழு", "ழூ", "ழெ", "ழே", "ழொ", "ழோ",
    "ள", "ளா", "ளி", "ளீ", "ளு", "ளூ", "ளெ", "ளே", "ளொ", "ளோ",
    "ற", "றா", "றி", "றீ", "று", "றூ", "றெ", "றே", "றொ", "றோ",
    "ன", "னா", "ணி", "னீ", "னு", "னூ", "னெ", "னே", "னொ", "னோ",
    "ஐ", "கை", "ஙை", "சை", "ஞை", "டை", "ணை", "தை", "நை",
    "பை", "மை", "யை", "ரை", "லை", "வை", "ழை", "ளை", "றை", "னை",
    "ஔ", "கௌ", "ஙௌ", "சௌ", "ஞௌ", "டௌ", "ணௌ", "தௌ", "நௌ", "பௌ",
    "மௌ", "யௌ", "ரௌ", "லௌ", "வௌ", "ழௌ", "ளௌ", "றௌ", "னௌ",
    "க்", "ங்", "ச்", "ஞ்", "ட்", "ண்", "த்", "ந்", "ப்", "ம்",
    "ய்", "ர்", "ல்", "வ்", "ழ்", "ள்", "ற்", "ன்"
];

// Initialize mathirai map
const mathiraiMap = {};
mathiraiMap["ஃ"] = 0.0;
let i = 1;
while (tamilLetters[i] !== "ஐ") {
    mathiraiMap[tamilLetters[i]] = (i % 2 === 0) ? 2.0 : 1.0;
    i++;
}
while (tamilLetters[i] !== "க்") {
    mathiraiMap[tamilLetters[i]] = 2.0;
    i++;
}
while (tamilLetters[i] !== "ன்") {
    mathiraiMap[tamilLetters[i]] = 0.5;
    i++;
}
mathiraiMap["ன்"] = 0.5;

// Utility functions
function splitToSyllables(input) {
    const syllables = [];
    for (let i = 0; i < input.length; i++) {
        const currentChar = input[i];
        if (i < input.length - 1 && isTamilCompound(input[i + 1])) {
            syllables.push(input.substring(i, i + 2));
            i++;
        } else {
            syllables.push(currentChar);
        }
    }
    return syllables;
}

function isTamilCompound(ch) {
    return ch >= '\u0BBE' && ch <= '\u0BCD';
}

function getMathiraiValues(input) {
    const syllables = splitToSyllables(input);
    return syllables.map(syllable => mathiraiMap[syllable] ?? -1);
}

// Function to check if a sentence is a Venba
function isVenba(nerniraiList) {
    // Validate rules:
    // 1. First word length is 3, with the last value as 0
    if (nerniraiList.length < 3 || nerniraiList[nerniraiList.length - 1] !== '0') return false;
    // 2. The next word's first value is 0
    if (nerniraiList[0] !== '0') return false;
    // 3. Second word length is 2, with the last value as 0
    if (nerniraiList.length < 2 || nerniraiList[1] !== '0') return false;
    // 4. Following word's first value is 1, with the last value as 1
    if (nerniraiList.length < 3 || nerniraiList[2] !== '1') return false;
    // 5. Next word's first value is 0
    if (nerniraiList.length < 4 || nerniraiList[3] !== '0') return false;

    return true;
}

// Apply Nirai-Ner rules based on mathirai values
function applyNiraiNerRules(values, analysis) {
    const nernirai = [];
    let i = 0;
    while (i < values.length) {
        if (i + 2 < values.length && values[i] === 1.0 && values[i + 1] === 1.0 && values[i + 2] === 0.5) {
            analysis.push("நிரை");
            i += 3;
            nernirai.push('1');
        } else if (i + 2 < values.length && values[i] === 1.0 && values[i + 1] === 2.0 && values[i + 2] === 0.5) {
            analysis.push("நிரை");
            i += 3;
            nernirai.push('1');
        } else if (i + 1 < values.length && values[i] === 1.0 && values[i + 1] === 0.5) {
            analysis.push("நேர்");
            i += 2;
            nernirai.push('0');
        } else if (i + 1 < values.length && values[i] === 2.0 && values[i + 1] === 0.5) {
            analysis.push("நேர்");
            i += 2;
            nernirai.push('0');
        } else if (i + 1 < values.length && values[i] === 1.0 && values[i + 1] === 1.0) {
            analysis.push("நிரை");
            i += 2;
            nernirai.push('1');
        } else if (i + 1 < values.length && values[i] === 1.0 && values[i + 1] === 2.0) {
            analysis.push("நிரை");
            i += 2;
            nernirai.push('1');
        } else if (i < values.length && values[i] === 0.5) {
            analysis.push("வலியினம்");
            i++;
            nernirai.push('0');
        } else if (i < values.length && values[i] === 2.0) {
            analysis.push("வலியினம்");
            i++;
            nernirai.push('0');
        } else {
            i++;
        }
    }
    return nernirai;
}

// Print the Venba words
function printVenbaWords(nerniraiList) {
    nerniraiList.forEach(current => {
        switch (current) {
            case "00":
                process.stdout.write("தேமா ");
                break;
            case "10":
                process.stdout.write("புளிமா ");
                break;
            case "01":
                process.stdout.write("கூவிளம் ");
                break;
            case "11":
                process.stdout.write("கருவிளம் ");
                break;
            case "000":
                process.stdout.write("தேமாங்காய் ");
                break;
            case "100":
                process.stdout.write("புளிமாங்காய் ");
                break;
            case "010":
                process.stdout.write("கூவிளங்காய் ");
                break;
            case "110":
                process.stdout.write("கருவிளங்காய் ");
                break;
        }
    });

    const lastSir = nerniraiList[nerniraiList.length - 1];
    switch (lastSir) {
        case "0":
            process.stdout.write("நாள்");
            break;
        case "1":
            process.stdout.write("மலர்");
            break;
        case "00":
            process.stdout.write("காசு");
            break;
        case "10":
            process.stdout.write("பிறப்பு");
            break;
    }
}

// Main function for user input
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

rl.question("Enter a Venba: ", (sentence) => {
    const mathiraiValues = getMathiraiValues(sentence);
    const analysis = [];
    const nerniraiList = applyNiraiNerRules(mathiraiValues, analysis);

    if (isVenba(nerniraiList)) {
        printVenbaWords(nerniraiList);
    } else {
        console.log("The input does not conform to the Venba structure.");
    }
    
    rl.close();
});


    </script>
</body>
</html>
